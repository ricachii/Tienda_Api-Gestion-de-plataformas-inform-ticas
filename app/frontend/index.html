<!-- Estructura visual (HTML) --> 

<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ğŸ’Š VitaZone â€¢ Tienda</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <a class="skip-link" href="#productos">Saltar al contenido</a>
  <header>
    <div class="brand"><h1>ğŸ’Š VitaZone â€¢ Tienda</h1></div>
    <div class="toolbar">
      <div class="pill">
        <input id="q" type="search" placeholder="Buscar (ej. whey, omega, creatina)" aria-label="Buscar productos">
        <button id="buscar" aria-label="Buscar">Buscar</button>
      </div>
      <select id="catSel" aria-label="Filtrar por categorÃ­a"><option value="">Todas</option></select>

      <a class="link" href="/docs" target="_blank" rel="noopener">Swagger</a>
      <a class="link" href="/redoc" target="_blank" rel="noopener">ReDoc</a>

      <div class="cart-pill" title="Ãtems en el carrito">
        <span>ğŸ›’</span><span id="cartCount" class="badge">0</span>
      </div>

      <!-- Cuenta / sesiÃ³n -->
      <div class="cart-pill" title="Cuenta">
        <span id="whoami" class="muted">Invitado</span>
        <button id="btnLogin" class="ghost ml8">Iniciar sesiÃ³n</button>
        <button id="btnLogout" class="ghost ml8" style="display:none">Salir</button>
      </div>
    </div>
    <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-controls="toolbar">â˜°<span class="sr-only">Abrir menÃº</span></button>
  </header>

  <main role="main">
    <section>
      <div id="alertas" aria-live="polite" class="sr-only"></div>

      <div id="loading" class="load-skel" style="display:none" aria-hidden="true">
        <div class="load-card"></div><div class="load-card"></div><div class="load-card"></div>
        <div class="load-card"></div><div class="load-card"></div><div class="load-card"></div>
      </div>

      <div class="grid" id="productos" aria-live="polite"></div>

      <div id="listFooter" class="toolbar-row" style="justify-content:center;margin-top:12px;display:none">
        <button id="loadMore" class="ghost">Cargar mÃ¡s</button>
        <span id="endMsg" class="muted" style="display:none">No hay mÃ¡s resultados</span>
      </div>
    </section>

  <aside role="complementary" aria-label="Carrito">
      <h3 style="margin:6px 0 4px">ğŸ›’ Carrito</h3>
      <div id="cart" class="cart-empty" aria-live="polite">VacÃ­o</div>

      <div class="subt"><span>Subtotal</span><span id="subtotal">$0</span></div>
      <div class="subt"><span>Despacho (estimado)</span><span id="ship">$0</span></div>
      <div class="subt"><span>Descuentos</span><span id="disc">$0</span></div>
      <div class="tot"><span>Total</span><span id="total">$0</span></div>

      <div class="foot-actions">
        <button id="vaciar" class="ghost" aria-label="Vaciar carrito">Vaciar</button>
        <button id="resumen" class="warn" aria-label="Ver resumen">Resumen</button>
        <button id="pagar" aria-label="Pagar">Pagar</button>
      </div>
      <p class="muted" style="margin-top:8px">API: <code id="apiBase"></code></p>
    </aside>
  </main>

  <footer>Â© VitaZone â€” demo acadÃ©mica</footer>

  <!-- ===== Modal Resumen ===== -->
  <div id="ovSummary" class="overlay" role="dialog" aria-modal="true" aria-labelledby="sumTitle">
    <div class="modal" role="document">
      <header>
        <div style="display:flex;align-items:center;justify-content:space-between">
          <h3 id="sumTitle" style="margin:0">ğŸ§¾ Resumen de compra</h3>
          <button class="x" data-close="ovSummary" aria-label="Cerrar">âœ•</button>
        </div>
      </header>
      <div class="content">
        <div id="sumEmpty" class="muted">Tu carrito estÃ¡ vacÃ­o.</div>
        <div id="sumContent" style="display:none">
          <div class="receipt" id="receiptItems"></div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px">
            <div class="field">
              <label for="inpNombre">Nombre (opcional)</label>
              <input id="inpNombre" type="text" placeholder="Nombre y apellido">
            </div>
            <div class="field">
              <label for="inpEmail">Email (opcional)</label>
              <input id="inpEmail" type="email" placeholder="tu@correo.com">
            </div>
          </div>
          <p class="muted" style="margin:8px 0 0">Los datos se guardan localmente para prÃ³ximas compras.</p>
          <p id="sumErr" class="errtxt" style="display:none"></p>
        </div>
      </div>
      <div class="actions">
        <button class="ghost" data-close="ovSummary">Seguir comprando</button>
        <button id="btnConfirmarResumen">Confirmar y pagar</button>
      </div>
    </div>
  </div>

  <!-- ===== Modal Boleta ===== -->
  <div id="ovDone" class="overlay" role="dialog" aria-modal="true" aria-labelledby="doneTitle">
    <div class="modal" role="document">
      <header>
        <div style="display:flex;align-items:center;justify-content:space-between">
          <h3 id="doneTitle" style="margin:0">âœ… Compra realizada</h3>
          <button class="x" data-close="ovDone" aria-label="Cerrar">âœ•</button>
        </div>
      </header>
      <div class="content">
        <div class="receipt">
          <h4>Boleta</h4>
          <div class="rline"><span>Orden</span><strong id="doneOrder">â€”</strong></div>
          <div class="rline"><span>Total</span><strong id="doneTotal">â€”</strong></div>
          <div id="doneItems" style="margin-top:6px"></div>
        </div>
        <p class="oktxt" style="margin-top:8px">Â¡Gracias por tu compra!</p>
      </div>
      <div class="actions">
        <button class="ghost" data-close="ovDone">Cerrar</button>
        <button id="btnSeguir">Seguir comprando</button>
      </div>
    </div>
  </div>

  <!-- ===== Modal AutenticaciÃ³n ===== -->
  <div id="ovAuth" class="overlay" role="dialog" aria-modal="true" aria-labelledby="authTitle">
    <div class="modal" role="document">
      <header>
        <div style="display:flex;align-items:center;justify-content:space-between">
          <h3 id="authTitle" style="margin:0">ğŸ” Acceso</h3>
          <button class="x" data-close="ovAuth" aria-label="Cerrar">âœ•</button>
        </div>
      </header>
      <div class="content">
        <div class="field">
          <label for="authEmail">Email</label>
          <input id="authEmail" type="email" placeholder="tu@correo.com" autocomplete="username">
        </div>
        <div class="field">
          <label for="authPass">ContraseÃ±a</label>
          <input id="authPass" type="password" placeholder="********" autocomplete="current-password">
        </div>

        <details style="margin-top:8px">
          <summary>Â¿No tienes cuenta? Registrar</summary>
          <div class="field" style="margin-top:8px">
            <label for="authName">Nombre</label>
            <input id="authName" type="text" placeholder="Nombre y apellido" autocomplete="name">
          </div>
        </details>

        <p id="authErr" class="errtxt" style="display:none"></p>
      </div>
      <div class="actions">
        <button class="ghost" id="btnDoRegister">Registrar</button>
        <button id="btnDoLogin">Iniciar sesiÃ³n</button>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
